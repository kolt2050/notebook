# <img src="static/img/logo-light.png" width="32" vertical-align="middle"> Приложение Notebook

Быстрый блокнот с поддержкой вложенности документов.

## Возможности
- **Мультиязычность**: Поддержка переключения между русским и английским языками (кнопка EN/RU).
- **Редактирование текста**: Современный редактор с поддержкой изображений и автоматическим сохранением.
- **Интерактивные ссылки**:
  - Автоматическое преобразование вставленных URL в кликабельные ссылки.
  - Навигация по ссылкам через **Ctrl + Click** (открытие в новой вкладке).
- **Умная организация**:
  - Автоматическая алфавитная сортировка документов и папок.
  - Поддержка вложенности и организация через Drag & Drop.
- **Управление данными**:
  - **Бэкап**: Сохранение копии базы данных через стандартное окно «Сохранить как».
  - **Импорт**: Восстановление данных из файла бэкапа.
  - **Markdown**: Экспорт отдельных документов или всего блокнота в Markdown.
- **Дизайн и UX**:
  - Расширенный интерфейс на всю ширину экрана с сохранением внутренней рамки.
  - Отключенная проверка орфографии браузера для чистоты интерфейса.
  - Современная темная тема с акцентом на контент.
- **Портативность изображений**: Изображения хранятся прямо в базе данных в формате base64.
- **Поиск**: Быстрый полнотекстовый поиск с подсветкой совпадений.

## Требования

Для работы приложения **требуется установленный Docker и Docker Compose**.

## Установка и запуск

Приложение контейнеризировано с помощью Docker для простого развертывания.

1.  **Клонируйте репозиторий**.
2.  **Запустите через Docker Compose**:
    ```bash
    docker compose up --build -d
    ```
3.  **Откройте приложение**: Перейдите по адресу [http://localhost:8005](http://localhost:8005) в вашем браузере.

---

## Структура проекта

### Обязательные файлы (для работы приложения)
- **`app/`**: Серверная часть приложения (FastAPI, SQLAlchemy).
  - `main.py`: Основной файл API и маршрутизации.
  - `models.py`, `schemas.py`, `database.py`: Работа с данными и схемой БД.
  - `services/`: Бизнес-логика (экспорт и др.).
- **`static/`**: Фронтенд приложения (HTML, CSS, JS).
- **`requirements.txt`**: Список зависимостей Python.
- **`Dockerfile` & `docker-compose.yml`**: Файлы для запуска в Docker (рекомендуемый способ).
- **`data/`**: Папка для хранения базы данных SQLite (`notebook.db`).

---

## Документация базы данных

Приложение использует базу данных SQLite для хранения всех документов и изображений.

### Расположение базы данных
- **Внутри Docker**: `/app/data/notebook.db`
- **Локально (Хост)**: `./data/notebook.db`

### Описание схемы

#### 1. Таблица `documents`
Хранит страницы, их содержимое и иерархию.

| Столбец | Тип | Описание |
| :--- | :--- | :--- |
| `id` | INTEGER | Первичный ключ (ID). |
| `title` | TEXT | Заголовок документа. |
| `content` | TEXT | Содержимое в формате HTML. |
| `is_folder` | BOOLEAN | `True` (1) если это папка. |
| `parent_id` | INTEGER | ID родительского документа (иерархия). |
| `position` | INTEGER | Порядковый номер (сортировка Drag & Drop). |

#### 2. Таблица `images`
Хранит изображения в кодировке base64.

| Столбец | Тип | Описание |
| :--- | :--- | :--- |
| `id` | INTEGER | Первичный ключ. |
| `filename` | TEXT | Оригинальное имя файла. |
| `data` | TEXT | Данные изображения в base64. |

---

## Как получить доступ к данным

### Через Docker CLI (командная строка)
```bash
docker exec -it notebook-notebook-app-1 python -c "import sqlite3; conn = sqlite3.connect('/app/data/notebook.db'); cursor = conn.cursor(); cursor.execute('SELECT id, title, position, parent_id FROM documents'); [print(row) for row in cursor.fetchall()]; conn.close()"
```

### Через SQLite CLI
```bash
sqlite3 data/notebook.db
```

### Через графические инструменты (GUI)
Вы можете открыть файл `./data/notebook.db` через:
- **DB Browser for SQLite**
- **DBeaver**
- **Расширения VS Code для SQLite**